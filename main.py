import telebot
from telebot import custom_filters
from telebot import StateMemoryStorage
from telebot.handler_backends import StatesGroup, State


state_storage = StateMemoryStorage()
# –í—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π —Ç–æ–∫–µ—Ç –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, —Ç–æ–≥–¥–∞ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –µ–≥–æ —Å–∞–º–∏
bot = telebot.TeleBot("6610080826:AAE21udGfNjihGKmyTrumNvIYjF6SVHEpKc",
                      state_storage=state_storage, parse_mode='Markdown')


class PollState(StatesGroup):
    name = State()
    age = State()


class HelpState(StatesGroup):
    wait_text = State()


text_poll = "üë®‚Äçü¶∞ –û–± –ê–≤—Ç–æ—Ä–µ –±–æ—Ç–∞"  # –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç
text_button_1 = "üîó –°—Å—ã–ª–∫–∏ –Ω–∞ –∞–≤—Ç–æ—Ä–∞"  # –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç


menu_keyboard = telebot.types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
menu_keyboard.add(
    telebot.types.KeyboardButton(
        text_poll,
    )
)
menu_keyboard.add(
    telebot.types.KeyboardButton(
        text_button_1,
    )
)


@bot.message_handler(state="*", commands=['start'])
def start_ex(message):
    bot.send_message(
        message.chat.id,
        '–ü—Ä–∏–≤–µ—Ç! –î–∞–Ω–Ω—ã–π –±–æ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π. –ü–æ–∫–∞ –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É "–û–± –ê–≤—Ç–æ—Ä–µ –±–æ—Ç–∞"',  # –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç
        reply_markup=menu_keyboard)

@bot.message_handler(func=lambda message: text_poll == message.text)
def first(message):
    bot.send_message(message.chat.id, '–ò—Ç–∞–∫... –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê—Ä—Ç–µ–º. –Ø –∏–∑ –ú–æ—Å–∫–≤—ã –∏ –º–Ω–µ 17 –ª–µ—Ç. –£—á—É—Å—å –≤ 11 –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–º –∫–ª–∞—Å—Å–µ. –°–¥–∞—é –Ω–∞ –ï–ì–≠: –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ (–ø—Ä–∏–≤–µ—Ç –ù–∞—Å—Ç–µ –ú–∞–ª–æ–≤–æ–π), –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫—É (–í–∏–∫—É—Å—å —Ö–∞–πüëã), –†—É—Å—Å–∫–∏–π ("–ì—Ä–∞–º–æ—Ç–Ω—ã–º –±—ã—Ç—å –º–æ–¥–Ω–æ" - –°–∞–Ω—è –ª–µ–≥–µ–Ω–¥–∞), –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Ñ–∏–ª—å–Ω—É—é –º–∞—Ç–µ—à—É (–¢—É—Ä–∏–∫ü§ì). –í –£–º—Å–∫—É–ª–µ (–º–æ–π –ª—é–±–∏–º—ã–π –º–µ–Ω–¥–≤–µ–∂–æ–Ω–æ–∫üíï) —è —Å 2022 –≥–æ–¥–∞. –ü—Ä–∏—à–µ–ª –≤ —Ñ–µ–≤—Ä–∞–ª–µ –∫ –ê–ª–∏–Ω–µ –ú–∞–∫—Å–∏–º–æ–≤–æ–π –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ –û–ì–≠ –ø–æ –ê–Ω–≥–ª–∏–π—Å–∫–æ–º—É –∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ —Ö–æ—á—É —Ä–∞—Å—Å—Ç–∞–≤–∞—Ç—å—Å—è, —Ç–∞–∫ –∫–∞–∫ –≤—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è –æ–Ω–ª–∞–π–Ω —à–∫–æ–ª–∞ —Å –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–∏—Ü–µ–Ω–∑–∏–µ–π (—Ö–µ—Öü§£ü§£ü§£) \n \n–¢–∞–∫... –ß—Ç–æ —ç—Ç–æ —è –≤—Å–µ –æ–± —É—á–µ–±–µ –∏ –æ–± —É—á–µ–±–µ... –î–∞–≤–∞–π –æ—Ç–≤–ª–µ—á–µ–º—Å—è –æ—Ç –Ω–µ–µ —Ö–æ—Ç—å –Ω–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç... –ù–µ—É–∂–µ–ª–∏ –∑–∞ 1.5 –º–µ—Å—è—Ü–∞ –æ–Ω–∞ —Ç–µ–±–µ –Ω–µ –Ω–∞—Å–∫—É—á–∏–ª–∞? –ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å–æ —Å–ª–æ–º–∞–Ω–Ω–æ–π –ø—Å–∏—Ö–∏–∫–æ–πüòÅ –ê —è –ø–æ–∂–∞–ª—É–π –ø—Ä–æ–¥–æ–ª–∂—É —Å–≤–æ–π —Ä–∞—Å—Å–∫–∞–∑ –æ —Å–µ–±–µ. \n \n–Ø –≤–æ–ª–æ–Ω—Ç–µ—Ä. –£–≤–ª–µ–∫–∞—é—Å—å –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —É–∂–µ –±–æ–ª–µ–µ 3—Ö –ª–µ—Ç (—Å 2020 –≥–æ–¥–∞). –î–ª—è –º–µ–Ω—è –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ - —É–∂–µ –∫–∞–∫ –º–æ—è –≤—Ç–æ—Ä–∞—è –∂–∏–∑–Ω—å. –í–µ–¥—å —è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–∏–º –∂–∏–≤—Éüòçüòçüòç –Ø —è–≤–ª—è—é—Å—å –≤–æ–ª–æ–Ω—Ç–µ—Ä–æ–º —Ç–∞–∫–æ–≥–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∫–∞–∫ –õ–∏–≥–∞ –ë—É–¥—É—â–µ–≥–æ. –°–æ—Å—Ç–æ—é –≤ –Ω–µ–π —É–∂–µ –±–æ–ª–µ–µ –≥–æ–¥–∞. –î–æ —ç—Ç–æ–≥–æ —è–≤–ª—è–ª—Å—è –≤–æ–ª–æ–Ω—Ç–µ—Ä–æ–º –í–¶ "–ú–æ—Å–≤–æ–ª–æ–Ω—Ç–µ—Ä". –í –º–æ–µ–π –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—ã–ª–æ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–π, –ø–µ—Ä–µ—á–∏—Å–ª—é –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ: "–ö—É–±–æ–∫ –≥—É–±–µ—Ä–Ω–∞—Ç–æ—Ä–∞. –õ–∏–≥–∞ –ø–æ–º–æ—Å–∫–æ–≤—å—è", "–ß–µ–º–ø–∏–æ–Ω–∞—Ç –†–æ—Å—Å–∏–∏ –ø–æ —Ç—Ä–∏–∞—Ç–ª–æ–Ω—É –æ—Ç IronStar", "–í–µ–ª–æ–≥–æ–Ω–∫–∞/–í–µ–ª–æ—Ñ–µ—Å—Ç–∏–≤–∞–ª—å LaStrada", "–§–æ—Ä—É–º "–ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π!" –Ω–∞ –í–î–ù–•", "–ó–∞–ë–µ–≥ –†–§". –ï—Å–ª–∏ —Ç–µ–±–µ –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∑–∞–±–µ–≥–∞–π –≤ –º–æ–π –∫–∞–Ω–∞–ª –ø–æ —Å—Å—ã–ª–∫–µ, –∫–æ—Ç–æ—Ä—É—é —è —Ä–∞—Å–ø–æ–ª–æ–∂—É –≤ –∫–Ω–æ–ø–∫–µ "–°—Å—ã–ª–∫–∏ –Ω–∞ –∞–≤—Ç–æ—Ä–∞". –ë—É–¥—É –æ—á–µ–Ω—å —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—åüòÅ \n \n–¢–∞–∫... –°–æ –º–Ω–æ–π –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å... –ê —Ç–µ–±—è –∫–∞–∫ –∑–æ–≤—É—Ç? –û—á–µ–Ω—å –±—ã —Ö–æ—Ç–µ–ª —Å —Ç–æ–±–æ–π –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, —Ä–∞—Å—Å–∫–∞–∂–µ—à—å –æ —Å–µ–±–µ? –ö–∞–∫ –∑–æ–≤—É—Ç? –ß–µ–º —É–≤–ª–µ–∫–∞–µ—à—å—Å—è?')
    bot.set_state(message.from_user.id, PollState.name, message.chat.id)


@bot.message_handler(state=PollState.name)
def name(message):
    with bot.retrieve_data(message.from_user.id, message.chat.id) as data:
        data['name'] = message.text
    bot.send_message(message.chat.id, '–û–≥–æ! –ù–µ –¥—É–º–∞–ª, —á—Ç–æ —Ç—ã –∏ –≤–ø—Ä–∞–≤–¥—É –Ω–∞–ø–∏—à–µ—à—å –æ —Å–µ–±–µ. –ö—Å—Ç–∞—Ç–∏ –≥–æ–≤–æ—Ä—è, –∫—Ä–∞—Å–∏–≤–æ–µ –∏–º—èüòç –ê —Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –≥–æ–≤–æ—Ä–∏—à—å –ª–µ—Ç?')
    bot.set_state(message.from_user.id, PollState.age, message.chat.id)


@bot.message_handler(state=PollState.age)
def age(message):
    with bot.retrieve_data(message.from_user.id, message.chat.id) as data:
        data['age'] = message.text
    bot.send_message(message.chat.id, '–£ —Ç–µ–±—è —Å–∞–º—ã–π –∫–ª–∞—Å—Å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Çüî•üî•üî•', reply_markup=menu_keyboard)  # –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç
    bot.delete_state(message.from_user.id, message.chat.id)


@bot.message_handler(func=lambda message: text_button_1 == message.text)
def help_command(message):
    bot.send_message(message.chat.id, "–Ø —Ä–∞–¥, —á—Ç–æ —è —Å–º–æ–≥ —Ç–µ–±—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å —Ç–∞–∫–∏–º –º–∞–ª–µ–Ω—å–∫–∏–º —Å–≤–æ–∏–º –ø–µ—Ä–≤—ã–º –±–æ—Ç–æ–º. –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –ø–æ–¥—Ä—É–∂–∏—Ç—å—Å—è, —Ç–æ –æ—Å—Ç–∞–≤–ª—è—é —Å–≤–æ–∏ links —Ç—É—Çüòâ \n \n*–í–ö* - vk.com/temamosvol \n \n*TG* - @temamosvol \n\n*–ú–æ–π —Ç–≥–∫* - https://t.me/+OHle3JRUFNM0NGNi \n \n–î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á!üíïüíïüíï", reply_markup=menu_keyboard)  # –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç


bot.add_custom_filter(custom_filters.StateFilter(bot))
bot.add_custom_filter(custom_filters.TextMatchFilter())

bot.infinity_polling()